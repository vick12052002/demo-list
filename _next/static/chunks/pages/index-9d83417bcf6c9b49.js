(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(n,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8454)}])},8454:(n,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>H});var t=r(8888),i=r(7876),o=r(4232),c=r(4264);function l(n,e){let r;return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];clearTimeout(r),r=setTimeout(()=>{n.apply(this,i)},e)}}function a(){let n=(0,t._)(["\n  background: #10b981;\n  color: white;\n  border-radius: 5px;\n  text-align: center;\n  width: 80px;\n"]);return a=function(){return n},n}function s(){let n=(0,t._)(["\n  background: #ef4444;\n"]);return s=function(){return n},n}let d=c.Ay.div(a()),u=(0,c.Ay)(d)(s());function x(){let n=(0,t._)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n  justify-content: center;\n"]);return x=function(){return n},n}function p(){let n=(0,t._)(["\n  width: calc(50% - 16px);\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 16px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  background-color: #ffffff;\n  transition: transform 0.2s, box-shadow 0.2s;\n\n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);\n  }\n"]);return p=function(){return n},n}function h(){let n=(0,t._)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #374151;\n"]);return h=function(){return n},n}function f(){let n=(0,t._)(["\n  font-size: 14px;\n  margin-top: 8px;\n  color: #4b5563;\n"]);return f=function(){return n},n}let g=c.Ay.div(x()),b=c.Ay.div(p()),m=c.Ay.p(h()),j=c.Ay.p(f());function y(n){let{items:e}=n;return(0,i.jsx)(g,{children:e.map((n,e)=>(0,i.jsxs)(b,{children:[(0,i.jsxs)(m,{children:["商品名稱 ",n.name]}),(0,i.jsxs)(j,{children:["類別 ",n.category]}),(0,i.jsxs)(j,{children:["價格 $",n.price]}),(0,i.jsx)(j,{children:n.inStock?(0,i.jsx)(d,{children:"有庫存"}):(0,i.jsx)(u,{children:"無庫存"})})]},e))})}function v(){let n=(0,t._)(["\n  width: 100%;\n  border-collapse: collapse;\n  border: 1px solid #e5e7eb;\n  border-radius: 5px;\n  background: #f9fafb;\n"]);return v=function(){return n},n}function w(){let n=(0,t._)(["\n  border: 1px solid #e5e7eb;\n  padding: 8px;\n  text-align: left;\n  background-color: #f3f4f6;\n  color: #374151;\n"]);return w=function(){return n},n}function k(){let n=(0,t._)(["\n  background: #fff;\n  border-bottom: 1px solid #e5e7eb;\n  padding: 8px;\n  text-align: left;\n  color: #4b5563;\n"]);return k=function(){return n},n}function _(){let n=(0,t._)(["\n  text-align: right;\n"]);return _=function(){return n},n}let A=c.Ay.table(v()),S=c.Ay.th(w()),C=c.Ay.td(k()),M=(0,c.Ay)(C)(_());function N(n){let{data:e}=n;return(0,i.jsxs)(A,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)(S,{children:"商品名稱"}),(0,i.jsx)(S,{children:"類別"}),(0,i.jsx)(S,{children:"價格"}),(0,i.jsx)(S,{children:"庫存"})]})}),(0,i.jsx)("tbody",{children:e.map((n,e)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)(C,{children:n.name}),(0,i.jsx)(C,{children:n.category}),(0,i.jsxs)(M,{children:["$",n.price]}),(0,i.jsx)(C,{children:n.inStock?(0,i.jsx)(d,{children:"有庫存"}):(0,i.jsx)(u,{children:"無庫存"})})]},e))})]})}function P(){let n=(0,t._)(["\n	width: 40px;\n	height: 40px;\n	border-radius: 4px;\n	background-color: #fff;\n	cursor: pointer;\n	transition: background-color 0.2s, color 0.2s;\n\n\n	&:hover {\n	background-color: #f0f0f0;\n	}\n\n	&.active {\n	color: blue;\n	}\n\n	&.disabled {\n	cursor: not-allowed;\n	opacity: 0.3;\n	}\n"]);return P=function(){return n},n}let E=c.Ay.button(P());function F(n){let{filteredData:e,itemsPerPage:r,currentPage:t,totalPages:o,handleItemsPerPageChange:c,handleDirectPageInput:l,renderPagination:a}=n;return(0,i.jsxs)("div",{className:"p-2.5 gap-2 flex-auto text-center",children:[(0,i.jsxs)("p",{children:["總共: ",e.length," 筆，當前頁數：",t]}),(0,i.jsx)("label",{htmlFor:"items-per-page",children:"每頁顯示："}),(0,i.jsxs)("select",{id:"items-per-page",value:r,onChange:c,children:[(0,i.jsx)("option",{value:"10",children:"10"}),(0,i.jsx)("option",{value:"30",children:"30"}),(0,i.jsx)("option",{value:"50",children:"50"}),(0,i.jsx)("option",{value:"100",children:"100"})]}),(0,i.jsx)("label",{htmlFor:"direct-page-input",children:"跳至頁數："}),(0,i.jsx)("input",{id:"direct-page-input",type:"number",min:"1",max:o,value:t,onChange:l}),(0,i.jsx)("div",{className:"page-buttons",children:a()})]})}function z(){let n=(0,t._)(["\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  background-color: #ffffff;\n"]);return z=function(){return n},n}function L(){let n=(0,t._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin: 8px 0;\n"]);return L=function(){return n},n}function T(){let n=(0,t._)(["\n  flex-direction: row;\n  align-items: center;\n"]);return T=function(){return n},n}function D(){let n=(0,t._)(["\n  font-size: 14px;\n  color: #374151;\n"]);return D=function(){return n},n}function I(){let n=(0,t._)(["\n  padding: 8px;\n  border: 1px solid #e5e7eb;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #4b5563;\n\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n  }\n"]);return I=function(){return n},n}function O(){let n=(0,t._)(["\n  padding: 8px;\n  border: 1px solid #e5e7eb;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #4b5563;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n  }\n"]);return O=function(){return n},n}function W(){let n=(0,t._)(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]);return W=function(){return n},n}let X=c.Ay.form(z()),$=c.Ay.div(L()),B=(0,c.Ay)($)(T()),Y=c.Ay.label(D()),q=c.Ay.input(I());c.Ay.select(O());let G=c.Ay.div(W());function H(){let[n,e]=(0,o.useState)({name:"",category:[],priceMin:"",priceMax:"",inStock:!1}),[r,t]=(0,o.useState)([]),[c,a]=(0,o.useState)([]),[s,d]=(0,o.useState)([]),[u,x]=(0,o.useState)(!0),[p,h]=(0,o.useState)(1),[f,g]=(0,o.useState)(30),[b,m]=(0,o.useState)(window.innerWidth<768);(0,o.useEffect)(()=>{!async function(){try{let n=await fetch("/items.json"),e=await n.json();t(e),a(e);let r=[...new Set(e.map(n=>n.category).filter(Boolean))];d(r),console.log("get data")}catch(n){console.error("Error fetching data:",n)}finally{console.log("setLoading"),x(!1)}}();let n=l(()=>{m(window.innerWidth<768)},200);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);let j=(0,o.useCallback)(l(n=>{a(r.filter(e=>{var r;let t=!n.name||(null==(r=e.name)?void 0:r.toLowerCase().includes(n.name.toLowerCase())),i=!(n.category.length>0)||n.category.includes(e.category),o=!n.priceMin||e.price>=parseFloat(n.priceMin),c=!n.priceMax||e.price<=parseFloat(n.priceMax),l=!n.inStock||e.inStock===n.inStock;return t&&i&&o&&c&&l})),h(1)},500),[r]);function v(r){let{name:t,value:i,type:o,checked:c}=r.target,l={...n,[t]:"checkbox"===o?c:i};e(l),j(l)}function w(r){let{value:t,checked:i}=r.target,o=i?[...n.category,t]:n.category.filter(n=>n!==t),c={...n,category:o};e(c),j(c)}let k=Math.ceil(c.length/f),_=c.slice((p-1)*f,p*f);return u?(0,i.jsx)("p",{children:"Loading..."}):(0,i.jsxs)("main",{className:"max-w-screen-lg m-0 mx-auto ring-gray-300",children:[(0,i.jsxs)(X,{onSubmit:n=>n.preventDefault(),children:[(0,i.jsxs)($,{children:[(0,i.jsx)(Y,{htmlFor:"name",children:"名稱"}),(0,i.jsx)(q,{type:"text",name:"name",placeholder:"請輸入名稱",value:n.name,onChange:v})]}),(0,i.jsxs)($,{children:[(0,i.jsx)(Y,{children:"類別"}),(0,i.jsx)(G,{children:s.map((e,r)=>(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"checkbox",id:"category-".concat(r),value:e,checked:n.category.includes(e),onChange:w}),(0,i.jsx)(Y,{htmlFor:"category-".concat(r),className:"mx-2",children:e})]},r))})]}),(0,i.jsxs)(B,{children:[(0,i.jsx)(Y,{htmlFor:"price",children:"價格"}),(0,i.jsx)(q,{type:"number",name:"priceMin",placeholder:"最低價",min:"1",value:n.priceMin,onChange:v}),(0,i.jsx)("span",{children:"~"}),(0,i.jsx)(q,{type:"number",name:"priceMax",placeholder:"最高價",value:n.priceMax,onChange:v})]}),(0,i.jsxs)(G,{children:[(0,i.jsx)(Y,{htmlFor:"inStock",children:"有庫存"}),(0,i.jsx)("input",{type:"checkbox",name:"inStock",checked:n.inStock,onChange:v})]})]}),(0,i.jsxs)("div",{className:"sort-container my-2 text-right ",children:[(0,i.jsx)("label",{htmlFor:"sort-price",children:"排序："}),(0,i.jsxs)("select",{id:"sort-price",onChange:function(n){let e=n.target.value;a([...c].sort((n,r)=>"asc"===e?n.price-r.price:"desc"===e?r.price-n.price:0))},className:"cursor-pointer",children:[(0,i.jsx)("option",{value:"",children:"無排序"}),(0,i.jsx)("option",{value:"asc",children:"價格低到高"}),(0,i.jsx)("option",{value:"desc",children:"價格高到低"})]})]}),b?(0,i.jsx)(y,{items:_}):(0,i.jsx)(N,{data:_}),(0,i.jsx)(F,{filteredData:c,itemsPerPage:f,currentPage:p,totalPages:k,handleItemsPerPageChange:function(n){g(Number(n.target.value)),h(1)},handleDirectPageInput:function(n){h(Math.max(1,Math.min(k,Number(n.target.value)||1)))},renderPagination:function(){let n=[],e=Math.max(1,p-Math.floor(2.5)),r=Math.min(k,e+5-1);for(let t=e;t<=r;t++)n.push((0,i.jsx)(E,{className:t===p?"active":"",onClick:()=>h(t),children:t},t));return n.unshift((0,i.jsx)(E,{onClick:()=>h(p-1),disabled:1===p,className:1===p?"disabled":"",children:"<"},"prev")),n.push((0,i.jsx)(E,{onClick:()=>h(p+1),disabled:p===k,className:p===k?"disabled":"",children:">"},"next")),n}})]})}}},n=>{var e=e=>n(n.s=e);n.O(0,[39,636,593,792],()=>e(2936)),_N_E=n.O()}]);